<div class="contenedor">

  <h2 class="dato">Ingresar Nueva Solicitud de Compra</h2>
  <form [formGroup]="formProveedor">
      <div class="row1">
          <!-- Ingresar Nombre -->
          <div class="nombre2">
              <h2 class="articulo">Proveedor</h2>
              <mat-form-field class="nombre1" appearance="fill">
              <mat-label>Ingrese Proveedor</mat-label>
              <input type="text"
              aria-label="text"
              matInput
              [formControl]="proveedores"
              [matAutocomplete]="auto2"  >
              <mat-autocomplete #auto2="matAutocomplete" (optionSelected)="capturarProveedor($event)" [displayWith]="displayFn">
                  <mat-option *ngFor="let item of filteredOptions | async"  [value]="item" ngValue="item.id"  >
                  {{item.nombre}}
                  </mat-option>
              </mat-autocomplete>
              </mat-form-field>
          </div>
          <div class="nombre3">
              <ul>
                <li >
                  <h3 class="antic">Â¿Anticipo?</h3>
                </li>
                <mat-radio-group formControlName="opcion" aria-label="Select an option" style="margin-left: -35px;" >
                    <mat-radio-button style="margin-left: 5%;" *ngFor="let opcion of opciones" [value]="opcion" value="{{opcion}}" (change)="capturarOpcion(opcion);">{{opcion}}</mat-radio-button>
                </mat-radio-group>
              </ul>
              <mat-form-field class="nombre" appearance="fill" id="anticipo" style="display: none;">
                  <mat-label>Ingrese anticipo en porcentaje</mat-label>
                  <input type="number" max="100" min="0" id="antici" formControlName="antici" matInput>
              </mat-form-field>
          </div>
      </div>
  <section id="tablita" class="example-container mat-elevation-z8" tabindex="0">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 tabla">
      <!-- Position Column -->
      <ng-container matColumnDef="articulo">
        <th mat-header-cell *matHeaderCellDef><h3 class="ar">Articulo</h3></th>
        <td mat-cell *matCellDef="let element"> {{element.solicitudDetalle.idArticulos.descripcion}} </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="cantidad">
        <th mat-header-cell *matHeaderCellDef><h3 class="cant"> Cantidad </h3></th>
        <td mat-cell *matCellDef="let element"> {{element.solicitudDetalle.cantidad}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="valorUnitario">
        <th mat-header-cell *matHeaderCellDef><h3 class="o"> Valor Unitario </h3></th>
        <td mat-cell *matCellDef="let element">
          <input type="number"  name="valor" id="precio" formControlName="valor" (keyup)="valorUnitario($event, element.solicitudDetalle)">
      </td>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="valorTotal">
        <th mat-header-cell *matHeaderCellDef><h3 class="v"> Valor Total </h3></th>
        <td mat-cell *matCellDef="let element">
          <div *ngFor="let item of lista">
              <div *ngIf="element.solicitudDetalle.idArticulos.id == item.solicitudDetalle.idArticulos.id && ultimaPosicion == item.posicion">
                  ${{item.valorUnitario | currency:'COP':'symbol':'1.0-0'}}
              </div>
              <div *ngIf="element.solicitudDetalle.idArticulos.id == item.solicitudDetalle.idArticulos.id && ultimaPosicion != item.posicion">
                  ${{item.valorUnitario | currency:'COP':'symbol':'1.0-0'}}
              </div>
          </div>
      </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"
          (click)="selection.toggle(row)">
      </tr>
    </table>
  </section>
      <p class="sub">Subtotal: ${{subtotal | currency:'COP':'symbol':'1.0-0'}}</p>
      <p class="val">Anticipo: {{anticipoVal2 | number:'1.0-2'}} %</p>
      <p class="des">Valor Anticipo: ${{descuento | currency:'COP':'symbol':'1.0-0'}}</p>
      <p class="to">Total: ${{total | currency:'COP':'symbol':'1.0-0'}}</p>

    <button mat-raised-button class="guardar4" (click)="generarOrden()">Generar</button>
  </form>
</div>
<div class="solpiner" id="snipper" style="text-align: center; display: none;">
  <div class="loader"></div>
</div>
